<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<title>판매자 회원가입 페이지</title>
<style type="text/css">
.signupform { display: flex; align-items: center; }
.required { color:#FF0000 }
</style>
<script src="https://code.jquery.com/jquery-3.7.0.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
<script type="text/javascript" th:inline="javascript">
var idcomplete = false;

function idDuplicate()
{
		var adminId = sellerSigninForm.adminId.value;

		$.ajax({
			url:'/account/signin/idDuplicate',
			method:'post',
			data:{'adminId':adminId},
			cache:false,
			dataType:'json',
			success : function(res){	
				if(res.isDuplicate){
					alert("이 아이디는 사용 가능합니다.");
					idcomplete = true;
				}else{	
					alert("이미 사용중인 아이디입니다.");
				}
			},
			error : function(){
				alert("아이디 중복 확인 ajax 실행 실패");
			}
		});
		return false;
}

function sellerSignIn()
{
	var adminpass = document.getElementById('adminpass');
	var adminpassagain = document.getElementById('adminpassagain');
	
	if(adminpass.value != adminpassagain.value)
	{
		alert("비밀번호가 일치하지 않습니다."); return false;
	}
	if(idcomplete==false)
	{
		alert("아이디 중복 확인을 해주세요."); return false;	
	}
	if(!confirm("작성하신 정보로 등록하시겠습니까?")) return false;
	var formdata = $('#sellerSigninForm').serialize();
	$.ajax({
		url:'/account/signin',
		method: 'post',
		data: formdata,
		cache: false,
		dataType: 'json',
		success: function (res) {
			alert(res.signin ? '회원가입 성공. 로그인 페이지로 돌아갑니다.':'회원가입이 실패하였습니다.');
			if(res.signin) location.href='/account/login';
		},
		error:function(xhr,status,err){
			alert('에러:' + err);
		}
	});
	return false;
}
</script>
<script type="text/javascript" th:inline="javascript">
function backToLogin()
{
	if(!confirm('해당 페이지를 벗어나시겠습니까?')) return;
	location.href = "/account/";
}
</script>
</head>
<body>
<main class="signupform">
	<form id="sellerSigninForm" th:onsubmit="return sellerSignIn();">
		<h2>회원 가입</h2>
		<input type="hidden" name="cmd" value="signin">
		<div>
			<label><span class="required">*</span>표시는 필수로 입력해야할 항목입니다.</label>
		</div>
		<HR>
		<h3>대표자 정보</h3>
		<div>
			<label for="officeName">상호명 <span class="required">*</span></label>
			<input type="text" name="officeName" id="officeName" required>
		</div>
		<div>
			<label for="sellerName">대표자명 <span class="required">*</span></label>
			<input type="text" name="sellerName" id="sellerName" required>
		</div>
		<div>
			<label for="offRegiNum">사업자 등록번호 <span class="required">*</span></label>
			<input type="text" name="offRegiNum" id="offRegiNum" required>
		</div>
		<div>
			<label for="officeAdd">본사주소 <span class="required">*</span></label>
			<input type="text" name="officeAdd" id="officeAdd" required>
		</div>
		<div>
			<label for="busnessNum">통신판매업 신고번호<span class="required">*</span></label>
			<input type="text" name="busnessNum" id="busnessNum" required>
		</div>
		<div>
			<label for="busnessOcc">업태 <span class="required">*</span></label>
			<input type="text" name="busnessOcc" id="busnessOcc" required>
		</div>
		<div>
			<label for="busnessCate">종목 <span class="required">*</span></label>
			<input type="text" name="busnessCate" id="busnessCate" required>
		</div>
		<h4>대표자 연락사항</h4>
		<div>
			<label for="officeEmail">대표 이메일 <span class="required">*</span></label>
			<input type="text" name="officeEmail" id="officeEmail" required>
		</div>
				<div>
			<label for="officePhone">대표 전화번호 <span class="required">*</span></label>
			<input type="text" name="officePhone" id="officePhone" required>
		</div>
		<div>
			<label for="officeFax">대표 팩스번호</label>
			<input type="text" name="officeFax" id="officeFax">
		</div>
		<HR>
		<h3>관리자 계정 정보</h3>
		<div>
			<label for="adminId">관리자 ID <span class="required">*</span></label>
			<input type="text" name="adminId" id="adminId" required="required">
            <button type="button" th:onclick="idDuplicate();">중복확인</button>
		</div>
		<div>
			<label for="adminpass">관리자 비밀번호 <span class="required">*</span></label>
			<input type="password" name="adminpass" id="adminpass" required>
		</div>
		<div>
			<label for="adminpassagain">관리자 비밀번호 재입력 <span class="required">*</span></label>
			<input type="password" name="adminpassagain" id="adminpassagain">
		</div>
		<HR>
		<h3>판매 실무담당자 정보</h3>
		<div>
			<label for="sellerNick">판매자 닉네임 <span class="required">*</span></label>
			<input type="text" name="sellerNick" id="sellerNick" required>
		</div>
		<div>
			<label for="picName">담당자명 <span class="required">*</span></label>
			<input type="text" name="picName" id="picName" required>
		</div>
		<div>
			<label for="picEmail">담당자 이메일</label>
			<input type="text" name="picEmail" id="picEmail">
		</div>
		<div>
			<label for="pictel">담당자 전화번호</label>
			<input type="text" name="pictel" id="pictel">
		</div>
		<div>
			<label for="csPhone">CS 연락처 <span class="required">*</span></label>
			<input type="text" name="csPhone" id="csPhone" required>
		</div>
		<HR>
		<h3>정산 정보</h3>
		<div>
			<label for="bankName">사업자 은행명 <span class="required">*</span></label>
			<input type="text" name="bankName" id="bankName" required>
		</div>
		<div>
			<label for="accountholder">사업자 예금주명 <span class="required">*</span></label>
			<input type="text" name="accountholder" id="accountholder" required>
		</div>
		<div>
			<label for="accountadd">사업자 계좌번호 <span class="required">*</span></label>
			<input type="text" name="accountadd" id="accountadd" required>
		</div>
		<HR>
		<div>
			<button type="button" onclick="backToLogin()">뒤로가기</button>
			<button type="submit">회원가입</button>
		</div>
	</form>
</main>
</body>
</html>